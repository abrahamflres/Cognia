<div class="container mt-5">
  <!-- Profile Header -->
  <div class="card mb-4 p-4">
    <div class="row align-items-center">
      <div class="col-md-3 text-center">
        <% if @profile.image.attached? %>
          <%= image_tag @profile.image, class: "img-fluid rounded-circle shadow-sm", style: "max-height: 150px;" %>
        <% else %>
          <%= image_tag "default-profile.png", class: "img-fluid rounded-circle shadow-sm", style: "max-height: 150px;" %>
        <% end %>
      </div>
      <div class="col-md-9">
        <h2 class="fw-bold"><%= @profile.username %></h2>
        <p class="mb-1 text-muted"><%= @profile.firstname %> <%= @profile.lastname %></p>
        <p class="fst-italic"><%= @profile.bio %></p>

        <% if @current_profile&.id == @profile.id %>
          <%= link_to "Edit Profile", edit_profile_path(@profile), class: "btn btn-outline-primary btn-sm me-2" %>
          <%= link_to "Account Settings", edit_user_registration_path, class: "btn btn-outline-secondary btn-sm" %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Articles Section -->


  <% @articles.each do |a| %>
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <h4 class="card-title fw-bold"><%= a.title %></h4>
        <p class="card-text"><%= truncate(a.body, length: 200) %></p>

        <% if a.image.attached? %>
          <%= image_tag a.image, class: "img-fluid mb-3 rounded", style: "max-height: 250px;" %>
        <% else %>
          <p class="text-muted">No image attached</p>
        <% end %>

        <%= link_to "View Article", profile_article_path(@profile, a), class: "btn btn-sm btn-primary" %>
      </div>
    </div>
  <% end %>
</div>
